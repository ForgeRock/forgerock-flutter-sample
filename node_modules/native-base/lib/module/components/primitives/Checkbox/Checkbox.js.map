{"version":3,"sources":["Checkbox.tsx"],"names":["React","useContext","memo","forwardRef","Pressable","usePropsResolution","Center","useFormControlContext","Box","mergeRefs","useToggleState","CheckboxGroupContext","useCheckbox","useCheckboxGroupItem","useHasResponsiveProps","composeEventHandlers","combineContextAndProps","extractInObject","stylingProps","useHover","useFocus","useIsPressed","SizedIcon","Checkbox","wrapperRef","props","ref","formControlContext","isInvalid","isReadOnly","isIndeterminate","combinedProps","checkboxGroupContext","state","defaultSelected","defaultIsChecked","isSelected","isChecked","_ref","useRef","mergedRef","inputProps","groupItemInputProps","useMemo","checked","disabled","contextCombinedProps","useState","CheckboxComponent","hoverProps","isHovered","pressableProps","isPressed","focusProps","isFocused","isDisabled","icon","_interactionBox","_icon","onPress","onPressIn","onPressOut","onHoverIn","onHoverOut","onFocus","onBlur","resolvedProps","layoutProps","nonLayoutProps","margin","layout","flexbox","position","accessibilityProps","nonAccessibilityProps","children"],"mappings":"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","sourcesContent":["import React, { useContext, memo, forwardRef } from 'react';\nimport { Pressable, IPressableProps } from '../Pressable';\nimport { usePropsResolution } from '../../../hooks/useThemeProps';\nimport { Center } from '../../composites/Center';\nimport { useFormControlContext } from '../../composites/FormControl';\nimport Box from '../Box';\nimport { mergeRefs } from './../../../utils';\nimport type { ICheckboxProps } from './types';\nimport { useToggleState } from '@react-stately/toggle';\nimport { CheckboxGroupContext } from './CheckboxGroup';\nimport { useCheckbox, useCheckboxGroupItem } from '@react-native-aria/checkbox';\nimport { useHasResponsiveProps } from '../../../hooks/useHasResponsiveProps';\nimport { composeEventHandlers, combineContextAndProps } from '../../../utils';\nimport { extractInObject, stylingProps } from '../../../theme/tools/utils';\nimport {\n  useHover,\n  useFocus,\n  useIsPressed,\n} from '../../primitives/Pressable/Pressable';\nimport SizedIcon from './SizedIcon';\n\nconst Checkbox = ({ wrapperRef, ...props }: ICheckboxProps, ref: any) => {\n  const formControlContext = useFormControlContext();\n\n  const {\n    isInvalid,\n    isReadOnly,\n    isIndeterminate,\n    ...combinedProps\n  } = combineContextAndProps(formControlContext, props);\n\n  const checkboxGroupContext = useContext(CheckboxGroupContext);\n  const state = useToggleState({\n    ...combinedProps,\n    defaultSelected: combinedProps.defaultIsChecked,\n    isSelected: combinedProps.isChecked,\n  });\n\n  const _ref = React.useRef();\n  const mergedRef = mergeRefs([ref, _ref]);\n\n  // Swap hooks depending on whether this checkbox is inside a CheckboxGroup.\n  // This is a bit unorthodox. Typically, hooks cannot be called in a conditional,\n  // but since the checkbox won't move in and out of a group, it should be safe.\n  const { inputProps: groupItemInputProps } = checkboxGroupContext\n    ? // eslint-disable-next-line react-hooks/rules-of-hooks\n      useCheckboxGroupItem(\n        combinedProps,\n        checkboxGroupContext.state,\n        //@ts-ignore\n        mergedRef\n      )\n    : // eslint-disable-next-line react-hooks/rules-of-hooks\n      useCheckbox(\n        combinedProps,\n        state,\n        //@ts-ignore\n        mergedRef\n      );\n\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  const inputProps = React.useMemo(() => groupItemInputProps, [\n    groupItemInputProps.checked,\n    groupItemInputProps.disabled,\n  ]);\n\n  const [contextCombinedProps] = React.useState({\n    ...checkboxGroupContext,\n    ...combinedProps,\n  });\n\n  return (\n    <CheckboxComponent\n      inputProps={inputProps}\n      combinedProps={contextCombinedProps}\n      isInvalid={isInvalid}\n      isReadOnly={isReadOnly}\n      isIndeterminate={isIndeterminate}\n      wrapperRef={wrapperRef}\n    />\n  );\n};\nconst CheckboxComponent = React.memo(\n  ({\n    wrapperRef,\n    inputProps,\n    combinedProps,\n    isInvalid,\n    isReadOnly,\n    isIndeterminate,\n  }: any) => {\n    const _ref = React.useRef();\n    const { hoverProps, isHovered } = useHover();\n    const { pressableProps, isPressed } = useIsPressed();\n    const { focusProps, isFocused } = useFocus();\n\n    const { checked: isChecked, disabled: isDisabled } = inputProps;\n\n    const {\n      icon,\n      _interactionBox,\n      _icon,\n      // destructuring pressable props and passing it manually\n      onPress,\n      onPressIn,\n      onPressOut,\n      onHoverIn,\n      onHoverOut,\n      onFocus,\n      onBlur,\n      ...resolvedProps\n    } = usePropsResolution('Checkbox', inputProps, {\n      isInvalid,\n      isReadOnly,\n      isIndeterminate,\n      isDisabled,\n      isChecked,\n      isHovered,\n      isPressed,\n      isFocused,\n    });\n\n    const [layoutProps, nonLayoutProps] = extractInObject(resolvedProps, [\n      ...stylingProps.margin,\n      ...stylingProps.layout,\n      ...stylingProps.flexbox,\n      ...stylingProps.position,\n      '_text',\n    ]);\n\n    const [\n      accessibilityProps,\n      nonAccessibilityProps,\n    ] = extractInObject(nonLayoutProps, [\n      'accessibilityRole',\n      'accessibilityState',\n    ]);\n\n    //TODO: refactor for responsive prop\n    if (useHasResponsiveProps(resolvedProps)) {\n      return null;\n    }\n\n    return (\n      <Pressable\n        {...(pressableProps as IPressableProps)}\n        {...accessibilityProps}\n        onPress={onPress}\n        ref={mergeRefs([_ref, wrapperRef])}\n        accessibilityRole=\"checkbox\"\n        onPressIn={composeEventHandlers(onPressIn, pressableProps.onPressIn)}\n        onPressOut={composeEventHandlers(onPressOut, pressableProps.onPressOut)}\n        // @ts-ignore - web only\n        onHoverIn={composeEventHandlers(onHoverIn, hoverProps.onHoverIn)}\n        // @ts-ignore - web only\n        onHoverOut={composeEventHandlers(onHoverOut, hoverProps.onHoverOut)}\n        // @ts-ignore - web only\n        onFocus={composeEventHandlers(\n          composeEventHandlers(onFocus, focusProps.onFocus)\n          // focusRingProps.onFocu\n        )}\n        // @ts-ignore - web only\n        onBlur={composeEventHandlers(\n          composeEventHandlers(onBlur, focusProps.onBlur)\n          // focusRingProps.onBlur\n        )}\n      >\n        <Box {...layoutProps}>\n          <Center>\n            {/* Interaction Wrapper */}\n            <Box\n              {..._interactionBox}\n              p={5}\n              w=\"100%\"\n              height=\"100%\"\n              zIndex={-1}\n            />\n            {/* Checkbox */}\n            <Center {...nonAccessibilityProps}>\n              <SizedIcon icon={icon} _icon={_icon} isChecked={isChecked} />\n            </Center>\n          </Center>\n          {/* Label */}\n          {combinedProps.children}\n        </Box>\n      </Pressable>\n    );\n  }\n);\n\nexport default memo(forwardRef(Checkbox));\n"]}